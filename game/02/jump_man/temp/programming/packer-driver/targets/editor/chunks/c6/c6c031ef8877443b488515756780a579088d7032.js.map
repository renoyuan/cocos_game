{"version":3,"sources":["file:///F:/cocos/cocos_game/game/02/jump_man/assets/Scipte/AudioMgr.ts"],"names":["_decorator","Component","Node","AudioSource","AudioClip","resources","director","ccclass","property","AudioMgr","inst","_inst","constructor","_audioSource","audioMgr","name","getScene","addChild","addPersistRootNode","addComponent","audioSource","playOneShot","sound","volume","load","err","clip","console","log","play","stop","pause","resume","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, AudioSource, AudioClip, resources, director } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AudioMgr')\r\nexport class AudioMgr extends Component {\r\n    private static _inst: AudioMgr;\r\n    public static get inst(): AudioMgr {\r\n        if (this._inst == null) {\r\n            this._inst = new AudioMgr();\r\n        }\r\n        return this._inst;\r\n    }\r\n    private _audioSource: AudioSource;\r\n    constructor() {\r\n        super();\r\n        //@en create a node as audioMgr\r\n        //@zh 创建一个节点作为 audioMgr\r\n        let audioMgr = new Node();\r\n        audioMgr.name = '__audioMgr__';\r\n\r\n        //@en add to the scene.\r\n        //@zh 添加节点到场景\r\n        director.getScene().addChild(audioMgr);\r\n\r\n        //@en make it as a persistent node, so it won't be destroied when scene change.\r\n        //@zh 标记为常驻节点，这样场景切换的时候就不会被销毁了\r\n        director.addPersistRootNode(audioMgr);\r\n\r\n        //@en add AudioSource componrnt to play audios.\r\n        //@zh 添加 AudioSource 组件，用于播放音频。\r\n        this._audioSource = audioMgr.addComponent(AudioSource);\r\n    }\r\n\r\n    public get audioSource() {\r\n        return this._audioSource;\r\n    }\r\n\r\n     /**\r\n     * @en\r\n     * play short audio, such as strikes,explosions\r\n     * @zh\r\n     * 播放短音频,比如 打击音效，爆炸音效等\r\n     * @param sound clip or url for the audio\r\n     * @param volume \r\n     */\r\n    playOneShot(sound: AudioClip | string, volume: number = 1.0) {\r\n        if (sound instanceof AudioClip) {\r\n            this._audioSource.playOneShot(sound, volume);\r\n        }\r\n        else {\r\n            resources.load(sound, (err, clip: AudioClip) => {\r\n                if (err) {\r\n                    console.log(err);\r\n                }\r\n                else {\r\n                    this._audioSource.playOneShot(clip, volume);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @en\r\n     * play long audio, such as the bg music\r\n     * @zh\r\n     * 播放长音频，比如 背景音乐\r\n     * @param sound clip or url for the sound\r\n     * @param volume \r\n     */\r\n\r\n    play(sound: AudioClip | string, volume: number = 1.0) {\r\n        if (sound instanceof AudioClip) {\r\n            this._audioSource.stop();\r\n            this._audioSource.clip = sound;\r\n            this._audioSource.play();\r\n            this.audioSource.volume = volume;\r\n        }\r\n        else {\r\n            resources.load(sound, (err, clip: AudioClip) => {\r\n                if (err) {\r\n                    console.log(err);\r\n                }\r\n                else {\r\n                    this._audioSource.stop();\r\n                    this._audioSource.clip = clip;\r\n                    this._audioSource.play();\r\n                    this.audioSource.volume = volume;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * stop the audio play\r\n     */\r\n    stop() {\r\n        this._audioSource.stop();\r\n    }\r\n\r\n    /**\r\n     * pause the audio play\r\n     */\r\n    pause() {\r\n        this._audioSource.pause();\r\n    }\r\n\r\n    /**\r\n     * resume the audio play\r\n     */\r\n    resume(){\r\n        this._audioSource.play();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n}\r\n\r\n\r\n"]}