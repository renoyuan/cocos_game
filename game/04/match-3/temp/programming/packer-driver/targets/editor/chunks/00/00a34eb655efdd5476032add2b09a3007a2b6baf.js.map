{"version":3,"sources":["file:///F:/cocos/cocos_game/game/04/match-3/assets/UnitTest/Controller/LoginController.ts"],"names":["_decorator","Component","ProgressBar","Button","AudioClip","AudioSource","director","ccclass","property","LoginController","start","onLoad","audioSource","node","getComponent","loop","play","onDestroy","stop","onLogin","last","console","log","loadingBar","active","loginButton","progress","barSprite","fillRange","preloadScene","loadScene","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAgBC,MAAAA,W,OAAAA,W;AAAYC,MAAAA,M,OAAAA,M;AAAOC,MAAAA,S,OAAAA,S;AAAUC,MAAAA,W,OAAAA,W;AAAYC,MAAAA,Q,OAAAA,Q;;;;;;;;;OACxE;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;iCAGjBS,e,WADZF,OAAO,CAAC,iBAAD,C,UAKHC,QAAQ,CAACN,WAAD,C,UAGRM,QAAQ,CAACL,MAAD,C,UAGRK,QAAQ,CAACJ,SAAD,C,UAGRI,QAAQ,CAACH,WAAD,C,2BAdb,MACaI,eADb,SACqCR,SADrC,CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC3CS,QAAAA,KAAK,GAAG,CAEP;;AAaMC,QAAAA,MAAM,GAAG;AACZ;AACA,eAAKC,WAAL,GAAmB,KAAKC,IAAL,CAAUC,YAAV,CAAuBT,WAAvB,CAAnB,CAFY,CAIZ;;AACA,eAAKO,WAAL,CAAiBG,IAAjB,GAAwB,IAAxB,CALY,CAOZ;;AACA,eAAKH,WAAL,CAAiBI,IAAjB;AACD;;AACIC,QAAAA,SAAS,GAAI;AAChB,eAAKL,WAAL,CAAiBM,IAAjB;AACD;;AAEIC,QAAAA,OAAO,GAAI;AACd;AACA,gBAAMC,IAAI,GAAG,CAAb;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,UAAjB;AACA,eAAKA,UAAL,CAAgBV,IAAhB,CAAqBW,MAArB,GAA8B,IAA9B;AACA,eAAKC,WAAL,CAAiBZ,IAAjB,CAAsBW,MAAtB,GAA+B,KAA/B;AACA,eAAKD,UAAL,CAAgBG,QAAhB,GAA2B,CAA3B;AACA,eAAKH,UAAL,CAAgBI,SAAhB,CAA0BC,SAA1B,GAAsC,CAAtC,CAPc,CASd;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;;AACAtB,UAAAA,QAAQ,CAACuB,YAAT,CAAsB,MAAtB,EAA8B,YAAY;AACtC,iBAAKN,UAAL,CAAgBV,IAAhB,CAAqBW,MAArB,GAA8B,KAA9B;AACA,iBAAKC,WAAL,CAAiBZ,IAAjB,CAAsBW,MAAtB,GAA+B,KAA/B,CAFsC,CAGtC;AAEH,WALD;AAOAlB,UAAAA,QAAQ,CAACwB,SAAT,CAAmB,MAAnB;AAGL;;AAECC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA/D0C,O;;;;;iBAKX,I;;;;;;;iBAGJ,I;;;;;;;iBAGK,I;;;;;;;iBAGC,I","sourcesContent":["import { _decorator, Component, Node,ProgressBar,Button,AudioClip,AudioSource,director } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LoginController')\r\nexport class LoginController extends Component {\r\n    start() {\r\n\r\n    }\r\n    @property(ProgressBar)\r\n    public loadingBar:ProgressBar = null\r\n\r\n    @property(Button)\r\n    public loginButton:Button = null\r\n\r\n    @property(AudioClip)\r\n    public worldSceneBGM:AudioClip = null\r\n\r\n    @property(AudioSource)\r\n    public audioSource: AudioSource = null!;\r\n\r\n    public onLoad() {\r\n        // 确保你的AudioSource组件已经被添加到节点上\r\n        this.audioSource = this.node.getComponent(AudioSource);\r\n\r\n        // 设置音频循环播放\r\n        this.audioSource.loop = true;\r\n\r\n        // 开始播放音频\r\n        this.audioSource.play();\r\n      }\r\n    public onDestroy () {\r\n        this.audioSource.stop();\r\n      }\r\n\r\n    public onLogin () {\r\n        // 滚动条设置\r\n        const last = 0\r\n        console.log(this.loadingBar)\r\n        this.loadingBar.node.active = true;\r\n        this.loginButton.node.active = false;\r\n        this.loadingBar.progress = 0;\r\n        this.loadingBar.barSprite.fillRange = 0;\r\n        \r\n        //loadingBar\r\n        // onProgress() (count, amount, item) => {\r\n        //     let progress:number = parseFloat((count / amount).toFixed(2));\r\n\r\n        //     if (progress > this.loadingBar.progress) {\r\n        //       this.loadingBar.progress  = progress;\r\n        //     }\r\n        //   };\r\n\r\n        //preloadScene\r\n        director.preloadScene(\"Game\", function () {\r\n            this.loadingBar.node.active = false;\r\n            this.loginButton.node.active = false;\r\n            // cc.log(\"加载成功\");\r\n            \r\n        });\r\n\r\n        director.loadScene(\"Game\");\r\n       \r\n      \r\n  }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n\r\n}\r\n\r\n\r\n"]}