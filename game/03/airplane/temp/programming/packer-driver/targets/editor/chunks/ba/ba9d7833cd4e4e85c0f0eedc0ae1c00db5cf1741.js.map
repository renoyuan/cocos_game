{"version":3,"sources":["file:///F:/cocos/cocos_game/game/03/airplane/assets/script/ui/UIMain.ts"],"names":["_decorator","Component","Node","SystemEvent","GameManager","ccclass","property","UIMain","start","node","on","EventType","TOUCH_START","_touchStart","TOUCH_MOVE","_touchMove","TOUCH_END","_touchEnd","gameStart","active","reStart","gameOver","game","gameManager","playAudioEffect","gameReStart","returnMain","touch","event","isGameStart","isShooting","delta","getDelta","pos","playerPlane","position","setPosition","x","planeSpeed","y","z"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAmBC,MAAAA,W,OAAAA,W;;AAC1CC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;wBAGaO,M,WADZF,OAAO,CAAC,QAAD,C,UAKHC,QAAQ,CAACJ,IAAD,C,UAGRI,QAAQ;AAAA;AAAA,qC,UAGRA,QAAQ,CAACJ,IAAD,C,UAERI,QAAQ,CAACJ,IAAD,C,UAERI,QAAQ,CAACJ,IAAD,C,2BAfb,MACaK,MADb,SAC4BN,SAD5B,CACsC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAiBlCO,QAAAA,KAAK,GAAI;AACL,eAAKC,IAAL,CAAUC,EAAV,CAAaP,WAAW,CAACQ,SAAZ,CAAsBC,WAAnC,EAAgD,KAAKC,WAArD,EAAkE,IAAlE;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAaP,WAAW,CAACQ,SAAZ,CAAsBG,UAAnC,EAA+C,KAAKC,UAApD,EAAgE,IAAhE;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAaP,WAAW,CAACQ,SAAZ,CAAsBK,SAAnC,EAA8C,KAAKC,SAAnD,EAA8D,IAA9D;AAEA,eAAKC,SAAL,CAAeC,MAAf,GAAyB,IAAzB;AACH,SAvBiC,CAyBlC;AACA;AACA;;;AAEOC,QAAAA,OAAO,GAAE;AACZ,eAAKC,QAAL,CAAcF,MAAd,GAAuB,KAAvB;AACA,eAAKG,IAAL,CAAUH,MAAV,GAAmB,IAAnB;AACA,eAAKI,WAAL,CAAiBC,eAAjB,CAAiC,QAAjC;AACA,eAAKD,WAAL,CAAiBE,WAAjB;AACH;;AAEMC,QAAAA,UAAU,GAAE;AACf,eAAKL,QAAL,CAAcF,MAAd,GAAuB,KAAvB;AACA,eAAKD,SAAL,CAAeC,MAAf,GAAwB,IAAxB;AACA,eAAKI,WAAL,CAAiBC,eAAjB,CAAiC,QAAjC;AACA,eAAKD,WAAL,CAAiBG,UAAjB;AACH;;AAEDb,QAAAA,WAAW,CAACc,KAAD,EAAeC,KAAf,EAAiC;AACxC,cAAI,KAAKL,WAAL,CAAiBM,WAArB,EAAkC;AAC9B,iBAAKN,WAAL,CAAiBO,UAAjB,CAA4B,IAA5B;AACH,WAFD,MAEO;AACH,iBAAKZ,SAAL,CAAeC,MAAf,GAAwB,KAAxB;AACA,iBAAKG,IAAL,CAAUH,MAAV,GAAmB,IAAnB;AACA,iBAAKI,WAAL,CAAiBC,eAAjB,CAAiC,QAAjC;AACA,iBAAKD,WAAL,CAAiBL,SAAjB;AACH;AAEJ;;AAEDH,QAAAA,UAAU,CAACY,KAAD,EAAeC,KAAf,EAAiC;AACvC,cAAI,CAAC,KAAKL,WAAL,CAAiBM,WAAtB,EAAmC;AAC/B;AACH;;AAED,gBAAME,KAAK,GAAGJ,KAAK,CAACK,QAAN,EAAd;AACA,cAAIC,GAAG,GAAG,KAAKC,WAAL,CAAiBC,QAA3B;AACA,eAAKD,WAAL,CAAiBE,WAAjB,CAA6BH,GAAG,CAACI,CAAJ,GAAQ,OAAO,KAAKC,UAAZ,GAAyBP,KAAK,CAACM,CAApE,EAAuEJ,GAAG,CAACM,CAA3E,EAA8EN,GAAG,CAACO,CAAJ,GAAQ,OAAO,KAAKF,UAAZ,GAAyBP,KAAK,CAACQ,CAArH;AACH;;AAEDtB,QAAAA,SAAS,CAACU,KAAD,EAAeC,KAAf,EAAiC;AACtC,cAAI,CAAC,KAAKL,WAAL,CAAiBM,WAAtB,EAAmC;AAC/B;AACH;;AAED,eAAKN,WAAL,CAAiBO,UAAjB,CAA4B,KAA5B;AACH;;AAvEiC,O,6EACjCxB,Q;;;;;iBACmB,C;;;;;;;iBAGO,I;;;;;;;iBAGO,I;;;;;;;iBAGT,I;;;;;;;iBAEL,I;;;;;;;iBAEI,I;;;AA2D5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Component, Node, systemEvent, SystemEvent, Touch, EventTouch, Vec2 } from 'cc';\r\nimport { GameManager } from '../framework/GameManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = UIMain\r\n * DateTime = Mon Nov 15 2021 14:10:01 GMT+0800 (China Standard Time)\r\n * Author = mywayday\r\n * FileBasename = UIMain.ts\r\n * FileBasenameNoExtension = UIMain\r\n * URL = db://assets/script/ui/UIMain.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('UIMain')\r\nexport class UIMain extends Component {\r\n    @property\r\n    public planeSpeed = 1;\r\n\r\n    @property(Node)\r\n    public playerPlane: Node = null;\r\n\r\n    @property(GameManager)\r\n    public gameManager: GameManager = null;\r\n\r\n    @property(Node)\r\n    public gameStart: Node = null;\r\n    @property(Node)\r\n    public game: Node = null;\r\n    @property(Node)\r\n    public gameOver: Node = null;\r\n\r\n    start () {\r\n        this.node.on(SystemEvent.EventType.TOUCH_START, this._touchStart, this);\r\n        this.node.on(SystemEvent.EventType.TOUCH_MOVE, this._touchMove, this);\r\n        this.node.on(SystemEvent.EventType.TOUCH_END, this._touchEnd, this);\r\n\r\n        this.gameStart.active  = true;\r\n    }\r\n\r\n    // update (deltaTime: number) {\r\n    //     // [4]\r\n    // }\r\n\r\n    public reStart(){\r\n        this.gameOver.active = false;\r\n        this.game.active = true;\r\n        this.gameManager.playAudioEffect('button');\r\n        this.gameManager.gameReStart();\r\n    }\r\n\r\n    public returnMain(){\r\n        this.gameOver.active = false;\r\n        this.gameStart.active = true;\r\n        this.gameManager.playAudioEffect('button');\r\n        this.gameManager.returnMain();\r\n    }\r\n\r\n    _touchStart(touch: Touch, event: EventTouch){\r\n        if (this.gameManager.isGameStart) {\r\n            this.gameManager.isShooting(true);\r\n        } else {\r\n            this.gameStart.active = false;\r\n            this.game.active = true;\r\n            this.gameManager.playAudioEffect('button');\r\n            this.gameManager.gameStart();\r\n        }\r\n\r\n    }\r\n\r\n    _touchMove(touch: Touch, event: EventTouch){\r\n        if (!this.gameManager.isGameStart) {\r\n            return;\r\n        }\r\n\r\n        const delta = touch.getDelta();\r\n        let pos = this.playerPlane.position;\r\n        this.playerPlane.setPosition(pos.x + 0.01 * this.planeSpeed * delta.x, pos.y, pos.z - 0.01 * this.planeSpeed * delta.y);\r\n    }\r\n\r\n    _touchEnd(touch: Touch, event: EventTouch){\r\n        if (!this.gameManager.isGameStart) {\r\n            return;\r\n        }\r\n\r\n        this.gameManager.isShooting(false);\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}