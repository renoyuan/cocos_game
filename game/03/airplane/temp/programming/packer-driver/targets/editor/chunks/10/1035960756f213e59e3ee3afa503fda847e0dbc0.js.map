{"version":3,"sources":["file:///F:/cocos/cocos_game/game/03/airplane/assets/script/framework/GameManager.ts"],"names":["_decorator","Component","instantiate","Node","Prefab","Bullet","ccclass","property","GameManager","_curShootTime","_isShooting","isShooting","v","start","_init","shootTime","createSelpBullet","bullet","bullet01","node","addChild","pos","selfPlane","position","setPosition","x","y","z","bulletComp","getComponent","bulletSpeed","console","info","active","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AAC1CC,MAAAA,M,iBAAAA,M;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;6BAGjBQ,W,WADZF,OAAO,CAAC,aAAD,C,UAEHC,QAAQ,CAACJ,IAAD,C,UAGRI,QAAQ,CAACJ,IAAD,C,UAGRI,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,2BAhBb,MACaI,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAKd;AALc;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAmBf;AAnBe,eAsB/BQ,aAtB+B,GAsBf,CAtBe;AAsBb;AAtBa,eAuB/BC,WAvB+B,GAuBjB,KAvBiB;;AAAA;AAAA;;AA0Bf;AAEjBC,QAAAA,UAAU,CAACC,CAAD,EAAa;AAC1B;AACA,eAAKF,WAAL,GAAmBE,CAAnB;AACH;;AAEDC,QAAAA,KAAK,GAAG;AACJ,eAAKC,KAAL;AAEH;;AACOA,QAAAA,KAAK,GAAG;AACZ;AACA,eAAKL,aAAL,GAAqB,KAAKM,SAA1B;AAEH;;AAEMC,QAAAA,gBAAgB,GAAG;AACtB;AACA,gBAAMC,MAAM,GAAGf,WAAW,CAAC,KAAKgB,QAAN,CAA1B,CAFsB,CAEoB;;AAC1C,eAAKC,IAAL,CAAUC,QAAV,CAAmBH,MAAnB,EAHsB,CAItB;;AACA,gBAAMI,GAAG,GAAG,KAAKC,SAAL,CAAeC,QAA3B,CALsB,CAKe;;AACrCN,UAAAA,MAAM,CAACO,WAAP,CAAmBH,GAAG,CAACI,CAAvB,EAAyBJ,GAAG,CAACK,CAA7B,EAA+BL,GAAG,CAACM,CAAJ,GAAQ,CAAvC;AACA,gBAAMC,UAAU,GAAGX,MAAM,CAACY,YAAP;AAAA;AAAA,+BAAnB,CAPsB,CAOwB;AAC9C;;AACAD,UAAAA,UAAU,CAACE,WAAX,GAAuB,KAAKA,WAA5B,CATsB,CASkB;;AACxCC,UAAAA,OAAO,CAACC,IAAR,CAAa,kBAAb,EAAgCX,GAAG,CAACI,CAApC,EAAsCJ,GAAG,CAACK,CAA1C,EAA4CL,GAAG,CAACM,CAAJ,GAAQ,CAApD,EAAsDV,MAAM,CAACgB,MAA7D;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,eAAK1B,aAAL,IAAsB0B,SAAtB;;AACA,cAAI,KAAKzB,WAAL,IAAoB,KAAKD,aAAL,GAAqB,KAAKM,SAAlD,EAA6D;AACzD;AACA,iBAAKC,gBAAL;AACA,iBAAKP,aAAL,GAAqB,CAArB;AACH;AAGJ;;AAjEsC,O;;;;;iBAEd,I;;;;;;;iBAGN,I;;;;;;;iBAGO,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;oFAEzBF,Q;;;;;iBACkB,G;;sFAMlBA,Q;;;;;iBACoB,C","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab } from 'cc';\r\nimport { Bullet } from '../bullet/Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameManager')\r\nexport class GameManager extends Component {\r\n    @property(Node)\r\n    public selfPlane: Node = null;\r\n\r\n    @property(Node)\r\n    bulletRoot: Node = null; // 子弹根节点\r\n\r\n    @property(Prefab)\r\n    public bullet01: Prefab = null;\r\n    @property(Prefab)\r\n    public bullet02: Prefab = null;\r\n    @property(Prefab)\r\n    public bullet03: Prefab = null;\r\n    @property(Prefab)\r\n    public bullet04: Prefab = null;\r\n    @property(Prefab)\r\n    public bullet05: Prefab = null;\r\n\r\n    @property\r\n    public shootTime = 0.3; // 射击周期 \r\n\r\n\r\n    private _curShootTime = 0;// 当前等待时间\r\n    private _isShooting = false;\r\n\r\n    @property\r\n    public bulletSpeed = 1; // 子弹速度\r\n\r\n    public isShooting(v: boolean) {\r\n        // UIMain 中判断是否能开始发射子弹\r\n        this._isShooting = v\r\n    }\r\n\r\n    start() {\r\n        this._init();\r\n\r\n    }\r\n    private _init() {\r\n        // 第一发子弹不用等待\r\n        this._curShootTime = this.shootTime;\r\n\r\n    }\r\n\r\n    public createSelpBullet() {\r\n        // 创建子弹\r\n        const bullet = instantiate(this.bullet01) // 实例化预制件\r\n        this.node.addChild(bullet);\r\n        // bullet.setParent(this.bulletRoot) // 子弹实例放入子弹根节点\r\n        const pos = this.selfPlane.position; // 获取飞机位置 找到子弹初始位置\r\n        bullet.setPosition(pos.x,pos.y,pos.z - 7);\r\n        const bulletComp = bullet.getComponent(Bullet)// 获取节点上的组件 -- 子弹类\r\n        // console.info(\"bulletComp\", bulletComp)\r\n        bulletComp.bulletSpeed=this.bulletSpeed // 更新子弹移动速度\r\n        console.info(\"create bullet ok\",pos.x,pos.y,pos.z - 7,bullet.active)\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        this._curShootTime += deltaTime;\r\n        if (this._isShooting && this._curShootTime > this.shootTime) {\r\n            // 玩家飞机生产子弹\r\n            this.createSelpBullet();\r\n            this._curShootTime = 0;\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}