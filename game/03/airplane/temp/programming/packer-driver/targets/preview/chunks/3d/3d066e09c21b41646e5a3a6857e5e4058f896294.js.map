{"version":3,"sources":["file:///F:/cocos/cocos_game/game/03/airplane/assets/script/bullet/Bullet.ts"],"names":["_decorator","Component","Collider","Constant","PoolManager","ccclass","property","Bullet","_bulletSpeed","_direction","Direction","MIDDLE","_isEnemyBullet","onEnable","collider","getComponent","on","_onTriggerEnter","onDisable","off","update","deltaTime","pos","node","position","moveLength","z","setPosition","x","y","instance","putNode","LEFT","RIGHT","show","speed","isEnemyBullet","direction","event"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Collider, ITriggerEvent } from 'cc';\r\nimport { Constant } from '../framework/Constant';\r\nimport { PoolManager } from '../framework/PoolManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = Bullet\r\n * DateTime = Mon Nov 15 2021 14:58:43 GMT+0800 (China Standard Time)\r\n * Author = mywayday\r\n * FileBasename = Bullet.ts\r\n * FileBasenameNoExtension = Bullet\r\n * URL = db://assets/script/bullet/Bullet.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('Bullet')\r\nexport class Bullet extends Component {\r\n    private _bulletSpeed = 0;\r\n    private _direction = Constant.Direction.MIDDLE;\r\n    private _isEnemyBullet = false;\r\n\r\n    onEnable () {\r\n        const collider = this.getComponent(Collider);\r\n        collider.on('onTriggerEnter', this._onTriggerEnter, this);\r\n    }\r\n\r\n    onDisable () {\r\n        const collider = this.getComponent(Collider);\r\n        collider.off('onTriggerEnter', this._onTriggerEnter, this);\r\n    }\r\n\r\n    update (deltaTime: number) {\r\n        const pos = this.node.position;\r\n        let moveLength = 0;\r\n        if (this._isEnemyBullet) {\r\n            moveLength = pos.z + this._bulletSpeed;\r\n            this.node.setPosition(pos.x, pos.y, moveLength);\r\n            if (moveLength > 50) {\r\n                // this.node.destroy();\r\n                PoolManager.instance().putNode(this.node);\r\n                // console.log('bullet destroy');\r\n            }\r\n        } else {\r\n            moveLength = pos.z - this._bulletSpeed;\r\n            if(this._direction === Constant.Direction.LEFT){\r\n                this.node.setPosition(pos.x - this._bulletSpeed * 0.2, pos.y, moveLength);\r\n            } else if(this._direction === Constant.Direction.RIGHT){\r\n                this.node.setPosition(pos.x + this._bulletSpeed * 0.2, pos.y, moveLength);\r\n            } else{\r\n                this.node.setPosition(pos.x, pos.y, moveLength);\r\n            }\r\n\r\n            if (moveLength < -50) {\r\n                // this.node.destroy();\r\n                PoolManager.instance().putNode(this.node);\r\n                // console.log('bullet destroy');\r\n            }\r\n        }\r\n    }\r\n\r\n    show(speed: number, isEnemyBullet: boolean, direction = Constant.Direction.MIDDLE){\r\n        this._bulletSpeed = speed;\r\n        this._isEnemyBullet = isEnemyBullet;\r\n        this._direction = direction;\r\n    }\r\n\r\n    private _onTriggerEnter(event: ITriggerEvent){\r\n        // console.log('trigger  bullet destroy');\r\n        // this.node.destroy();\r\n        PoolManager.instance().putNode(this.node);\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}